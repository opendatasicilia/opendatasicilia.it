{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/2017/05/10/incidenti-stradali/",
    "result": {"data":{"allWpPost":{"nodes":[{"title":"Incidenti stradali","slug":"incidenti-stradali","uri":"/2017/05/10/incidenti-stradali/","excerpt":"<p>Visualizzazioni di dati aperti del Comune di Palermo sui sinistri stradali nell&#8217;anno 2016 Il Comune di Palermo ha pubblicato vari dati aperti sui sinistri stradali avvenuti nel territorio comunale e rilevato dalla Polizia Municipale. Uno di questi dati è dell&#8217;anno 2016 e contiene ogni sinistro con qualifica del danno, data, ora e posizione in geo [&hellip;]</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1635\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1635\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1635\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","content":"<h2 style=\"text-align: left\"><a href=\"/static/f3c2af1bf20aeecafb030886ef9e723c/2017-04-29-3.png\"><br />\n<img loading=\"lazy\" class=\"alignnone size-full wp-image-1636\" src=\"https://i2.wp.com/opendatasicilia.it/static/f3c2af1bf20aeecafb030886ef9e723c/2017-04-29-3.png?resize=1024%2C613&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"613\" srcset=\"https://i2.wp.com/opendatasicilia.it/static/f3c2af1bf20aeecafb030886ef9e723c/2017-04-29-3.png?w=1024&amp;ssl=1 1024w, https://i2.wp.com/opendatasicilia.it/static/f3c2af1bf20aeecafb030886ef9e723c/2017-04-29-3.png?resize=300%2C180&amp;ssl=1 300w, https://i2.wp.com/opendatasicilia.it/static/f3c2af1bf20aeecafb030886ef9e723c/2017-04-29-3.png?resize=768%2C460&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a>Visualizzazioni di dati aperti del Comune di Palermo sui sinistri stradali nell&#8217;anno 2016</h2>\n<p>Il Comune di Palermo ha pubblicato vari dati aperti sui sinistri stradali avvenuti nel territorio comunale e rilevato dalla Polizia Municipale. Uno di questi dati è dell&#8217;anno 2016 e contiene ogni sinistro con qualifica del danno, data, ora e posizione in geo coordinati.</p>\n<p>Ho realizzato una visualizzazione di questi dati con una <a href=\"http://projects.ixmaps.com.s3-website-eu-west-1.amazonaws.com/Palermo_Incidenti/app/Palermo_Incidenti/index_2016_full.html\">mappa interattiva</a> che offre vari temi per esplorare i vari aspetti spazio temporali dei dati.</p>\n<p>La mappa è realizzato con iXMaps, un framework in HTML5 per creare mappe interattive in grafica vettoriale e configurabili con un semplice linguaggio descrittivo.</p>\n<p>In seguito descrivo alcuni elementi e passi della realizzazione. Il codice intero è consultabile su <a href=\"https://github.com/gjrichter/PalermoIncidenti\">GitHub</a>.</p>\n<h3 id=\"mettere-i-dati-al-centro-di-tutto-quanto-è-bravo-giovanni-pirrotta\">I dati</h3>\n<p>Il portale &#8216;Open Data&#8217; del comune di Palermo offre l&#8217;accesso ai dati sui sinistri stradali attraverso vari link nei formato Shape, CSV e KML con licenza <a href=\"https://creativecommons.org/licenses/by/4.0/deed.it\" target=\"_blank\" rel=\"noopener noreferrer\">CC BY 4.0 IT </a>e fornisce i metadati in una nota:</p>\n<p>IL DATASET VIENE FORNITO ANCHE IN FORMATO KLM E CSV. IL DATASET E&#8217; STATO GEOREFERENZIATO DALL&#8217;ISP. SALVATORE PULLARA LEGENDA CODICI: M = MORTALE &#8211; SINISTRO CON ALMENO UN DECEDUTO; R = RISERVA &#8211; SINISTRO CON ALMENO UNA PERSONA IN PROGNOSI RISERVATA SULLA VITA (CHE SE SCIOLTA SI TRASFORMA IN UN NORMALE INCIDENTE CON FERITI F SE AVVIENE IL DECESSO IN UN MORTALE M); F = FERITI &#8211; SINISTRO CON LESIONI A PERSONE; C = COSE &#8211; SINISTRO CON SOLO DANNI A COSE.</p>\n<p><a href=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1646\" src=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30.png?resize=1024%2C683&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"683\" srcset=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30.png?w=1024&amp;ssl=1 1024w, https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30.png?resize=300%2C200&amp;ssl=1 300w, https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30.png?resize=768%2C512&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a></p>\n<p>Per la visualizzazione ho scaricato il <b>formato CSV</b>, che contiene tutte le informazioni sui incidenti incluso le posizioni in geo coordinati. Aprendo il CSV con LibreOffice si presenta cosi:</p>\n<p><a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1637\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?resize=1140%2C342&#038;ssl=1\" alt=\"\" width=\"1140\" height=\"342\" srcset=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?w=2414&amp;ssl=1 2414w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?resize=300%2C90&amp;ssl=1 300w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?resize=1024%2C308&amp;ssl=1 1024w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?resize=768%2C231&amp;ssl=1 768w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?resize=1536%2C461&amp;ssl=1 1536w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?resize=2048%2C615&amp;ssl=1 2048w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?resize=1568%2C471&amp;ssl=1 1568w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-30-crop.png?w=2280&amp;ssl=1 2280w\" sizes=\"(max-width: 1140px) 100vw, 1140px\" data-recalc-dims=\"1\" /></a></p>\n<p>Le colonne inquadrate contengono le informazioni utilizzati per la visualizzazione.</p>\n<h3 id=\"mettere-i-dati-al-centro-di-tutto-quanto-è-bravo-giovanni-pirrotta\">Definire il 1. tema</h3>\n<blockquote><p>iXMaps definisce una grammatica per mappe tematiche che consiste in una sintassi per oggetti Javascript (JSON) che configurano visualizzazioni creati direttamente dai dati.</p></blockquote>\n<p>Il primo tema della mappa interattiva visualizza ogni incidente con un punto con il colore del danno.</p>\n<pre><code>var num_totale =  \n  {\n  \"layer\": \"generic\",\n  \"field\": \"Incidenti\",\n  \"field100\": \"\",\n  \"style\": {\n          \"type\": \"CHART|BUBBLE|EXACT\",\n          \"colorscheme\": [\n                  \"RGB(77,184,73)\",\n                  \"RGB(255,92,92)\",\n                  \"RGB(3,3,3)\",\n                  \"RGB(153,51,102)\"],\n          \"shadow\": \"false\",\n          \"dbtable\": \"totale_incidenti_georef\",\n          \"dbtableUrl\": \"../../data/Palermo/_20032017144826.csv\",\n          \"dbtableType\": \"csv\",\n          \"dbtableExt\": \"preprocess.js\",\n          \"datacache\": \"true\",\n          \"itemfield\": \"lat|lon\",\n          \"lookupfield\": \"lat|lon\",\n          \"values\":[\n                  \"C\",\n                  \"F\",\n                  \"M\",\n                  \"R\"],\n          \"label\": [\n                  \"cose\",\n                  \"feriti\",\n                  \"mortale\",\n                  \"riserva\"],\n          \"units\": \"\",\n          \"scale\": \"1\",\n          \"title\": \"Incidenti Palermo 2016\",\n          }\n  };</code></pre>\n<ul>\n<li>&#8220;<b>type</b>&#8220;, &#8220;<b>colorscheme</b>&#8221; e &#8220;<b>values</b>&#8221; definiscono la rappresentazione come punti semplici con colore definito dalla colonna &#8216;Incidenti&#8217; che può contenere i valori C,F,M o R per qualificare il danno.</li>\n<li>&#8220;<b>lookupfield</b>&#8221; definisce le colonne per la posizione (latitudine e longitudine) del punto.</li>\n<li>&#8220;<b>dbtable</b>&#8221; definisce un nome interno al dataset. Ci servirà in seguito per una procedure che elabora i dati e crea colonne aggiuntive per i temi con analisi temporali.</li>\n<li>&#8216;<b>dbtableUrl</b>&#8216; punta al dataset e &#8216;<b>dbtableType</b>&#8216; dice che e di tipo CSV</li>\n<li>&#8220;<b>dbtableExt</b>&#8221; definisce un file Javascript che contiene questa procedura.</li>\n</ul>\n<p><a href=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1638\" src=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29.png?resize=1024%2C613&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"613\" srcset=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29.png?w=1024&amp;ssl=1 1024w, https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29.png?resize=300%2C180&amp;ssl=1 300w, https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29.png?resize=768%2C460&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a> Ecco, il 1° tema della mappa</p>\n<h3 id=\"mettere-i-dati-al-centro-di-tutto-quanto-è-bravo-giovanni-pirrotta\">Leggenda e navigatore tematico</h3>\n<p>A destra, sovrapposto alla mappa, si trova la leggenda della mappa con elementi per navigare nelle varie tematiche della mappa interattiva, adattare la rappresentazione ed altri elementi della interfaccia utente.</p>\n<ul>\n<li>mostra la leggenda degli elementi tematici della mappa</li>\n<li>contiene una grafica riassuntiva degli valori respettiva alla posizione della mappa</li>\n<li>offre strumenti per individualizzare il tema</li>\n<li>gestisce la navigazione tra i temi</li>\n</ul>\n<h4>Elementi della leggenda</h4>\n<p><a href=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/interfaccia-utente.png?ssl=1\"><img loading=\"lazy\" class=\"size-full wp-image-1639 alignnone\" src=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/interfaccia-utente.png?resize=445%2C612&#038;ssl=1\" alt=\"\" width=\"445\" height=\"612\" srcset=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/interfaccia-utente.png?w=445&amp;ssl=1 445w, https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/interfaccia-utente.png?resize=218%2C300&amp;ssl=1 218w\" sizes=\"(max-width: 445px) 100vw, 445px\" data-recalc-dims=\"1\" /></a></p>\n<ol>\n<li>Strumenti vari, da sinistra a destra: creare segnalibri, condividere la mappa,  definire filtri,  cambiare mappa di fondo informazioni, indice temi</li>\n<li>La leggenda del tema: mostra le somme attuali del tema clicca su un colore per vedere solo\n<ul>\n<li>il valore associato</li>\n</ul>\n</li>\n<li>Strumenti per modificare la rappresentazione del tema</li>\n<li>Navigatore veloce pagine</li>\n<li>Navigatore temi</li>\n</ol>\n<h3>Come accedere ai vari temi della mappa</h3>\n<p>I temi della mappa sono divisi in aree tematiche e variazioni. La navigazione tra i temi avviene simile ad una presentazione:</p>\n<ul>\n<li>per le variazioni di una tematica si scorre a sinistra o a destra</li>\n<li>per cambiare la tematica in alto o in basso</li>\n</ul>\n<blockquote><p>si può usare sia le frecce visibili in basso o la rotellina della mouse, o un movimento sul touch screen</p></blockquote>\n<ul>\n<li>In cima a destra si accede a un indice dei temi. Un altra possibilità di arrivare direttamente a un tema.</li>\n</ul>\n<h3>Note tecniche sulla legenda</h3>\n<p>La leggenda è una <a href=\"https://github.com/gjrichter/PalermoIncidenti/blob/master/app/Palermo_Incidenti/stories/2016/index.html\">pagina HTML</a> fondata su Bootstrap e jQuery che viene caricata in un iframe è interagisce con mappa attraverso Javascript.</p>\n<p>Il navigatore tra i temi, che segue la logica di una presentazione, con movimento orizontale e verticale da un tema all&#8217;altro, è realizzato grazie a <a href=\"http://alvarotrigo.com/fullPage/\">fullpage.js</a>  un jQuery plugin<br />\ndi Alvaro Trigo.</p>\n<h3>Realizzare temi</h3>\n<p>Per realizzare un tema definito con oggetto JSON, come descritto sopra, ci serve una funzione.</p>\n<pre><code>ixmaps.newTheme(nome,configurazione,modo);</code></pre>\n<p>dell&#8217;API di iXMaps. La chiamata viene codificato in &lt;a&gt; tag nascosto della pagina HTML e l&#8217;attivazione avviene quando l&#8217;utente cambia la pagina a sinistra/destra o in alto/basso.</p>\n<pre><code>\n<a id=\"theme_11\" href='ixmaps.newTheme(\"Palermo Incidenti\",num_totale,\"clear\");'></a>\n</code></pre>\n<blockquote><p>Il &lt;a&gt; tag ci serve per la posizione alla quale viene inserito la leggenda del tema.</p></blockquote>\n<p>Tutto il codice della &#8216;storia&#8217; della mappa, cioè la pagina HTML che gestisce i temi e la leggenda si trova su GitHub: <a href=\"https://github.com/gjrichter/PalermoIncidenti/blob/master/app/Palermo_Incidenti/stories/2016/index.html\">index.html</a></p>\n<h2>I temi della mappa</h2>\n<p>Tutti i temi della mappa sono definiti nel file <a href=\"https://github.com/gjrichter/PalermoIncidenti/blob/master/app/Palermo_Incidenti/stories/2016/themes.js\">themes.js</a></p>\n<h3>1° tema &#8211; incidenti e danno</h3>\n<p>Il primo tema visualizza ogni incidente con un punto con un colore in relazione al danno.<br />\nIl trema ha alcune variazioni, che possono essere attivati con il scorrere a destra o sinistra.<br />\nI variazioni declinano l&#8217;applicazione di aggregazioni e varianti grafici con l&#8217;intenzione di aumentare la visibilità di zone con caratteristiche simili. Alla fine è una sequenza di sperimenti fatto con i strumenti analitici e grafici di iXMaps con la speranza che tutti variazioni possono aiutare per capire i dati.</p>\n<ul>\n<li>la 1° variante aggiunge un <b>effetto &#8216;incandescenza&#8217;</b> intorno ai singoli punti. Questo porta ad una maggiore visibilità delle &#8216;zone calde&#8217; dove il punti si sovrappongono.</li>\n<li>la 2° applica un&#8217;<b>aggregazione per griglia</b></li>\n<li>la 3° variante <b>aumenta il rapporto</b> tra numero di eventi e <b>grandezza</b> degli cerchi e <b>riposiziona</b> i punti aggregati per griglia nel <b>centro del valore</b> dell&#8217;aggregazione: in effetti, i punti tornano sulle strade!</li>\n</ul>\n<p><a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/sequenza-23.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1640\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/sequenza-23.png?resize=1024%2C557&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"557\" srcset=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/sequenza-23.png?w=1024&amp;ssl=1 1024w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/sequenza-23.png?resize=300%2C163&amp;ssl=1 300w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/sequenza-23.png?resize=768%2C418&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a></p>\n<p><a href=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-3-1.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1641\" src=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-3-1.png?resize=1024%2C613&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"613\" srcset=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-3-1.png?w=1024&amp;ssl=1 1024w, https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-3-1.png?resize=300%2C180&amp;ssl=1 300w, https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-3-1.png?resize=768%2C460&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a></p>\n<h3 id=\"openpatti-un-esempio-virtuoso-da-emulare\">Aggregazioni dinamiche</h3>\n<p>Tutti temi, tranne i primi due, implementano un&#8217;aggregazione degli singoli eventi per una <b>griglia rettangolare</b> definita in <b>pixel dello schermo</b>.</p>\n<p>Cosi, <b>in relazione allo zoom della mappa</b>, il numero degli eventi che cadono in un rettangolo cambia, è in conseguenza il <b>livello di aggregazione</b> fino a mostrare i singoli eventi.</p>\n<p><a href=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-18.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1642\" src=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-18.png?resize=1024%2C683&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"683\" srcset=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-18.png?w=1024&amp;ssl=1 1024w, https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-18.png?resize=300%2C200&amp;ssl=1 300w, https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-18.png?resize=768%2C512&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a></p>\n<blockquote><p>La leggenda del tema mostra sempre il conteggio degli elementi attualmente visibile nella mappa, si aggiorna spostando o zoomando la mappa.</p></blockquote>\n<h3 id=\"openpatti-un-esempio-virtuoso-da-emulare\">2. area tematica: Analisi temporali</h3>\n<p>Nella 2° parte, la visualizzazione propone delle analisi temporali degli sinistri per:</p>\n<ul>\n<li>giorno della settimana</li>\n<li>fascia oraria</li>\n<li>mese del anno</li>\n</ul>\n<p><a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-6.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1643\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-6.png?resize=1024%2C683&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"683\" srcset=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-6.png?w=1024&amp;ssl=1 1024w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-6.png?resize=300%2C200&amp;ssl=1 300w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-6.png?resize=768%2C512&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a></p>\n<p>Per poter configurare questi temi dobbiamo prima creare nuove colonne nei dati con valori espliciti respetto ai analisi temporali, come per esempio il giorno della settimana (da 0 a 7). Per questo ci serve una procedura definita in &#8216;<a href=\"https://github.com/gjrichter/PalermoIncidenti/blob/master/app/Palermo_Incidenti/stories/2016/preprocess.js\">preprocess.js</a>&#8216;:</p>\n<pre class=\"\"><code>window.ixmaps = window.ixmaps || {}; \nwindow.ixmaps.totale_incidenti_georef = window.ixmaps.totale_incidenti_georef || {}; \n\n(function() { \n\n    ixmaps.totale_incidenti_georef.after = function(script) { \n        ... \n\n</code></pre>\n<p>che crea le seguente nuove colonne</p>\n<p><a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1644\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?resize=1140%2C624&#038;ssl=1\" alt=\"\" width=\"1140\" height=\"624\" srcset=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?w=1602&amp;ssl=1 1602w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?resize=300%2C164&amp;ssl=1 300w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?resize=1024%2C561&amp;ssl=1 1024w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?resize=768%2C420&amp;ssl=1 768w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?resize=1536%2C841&amp;ssl=1 1536w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/new_fields.png?resize=1568%2C858&amp;ssl=1 1568w\" sizes=\"(max-width: 1140px) 100vw, 1140px\" data-recalc-dims=\"1\" /></a></p>\n<p>per poter definire il seguente tema che visualizza il numero di incidenti per giorno della settimana.</p>\n<pre><code>var giorno_della_settimana_curve =  \n    {\n    \"layer\": \"generic\",\n    \"field\": \"GiornoDellaSettimana\",\n    \"field100\": \"\",\n    \"style\": {\n            \"type\": \"CHART|SYMBOL|EXACT|FIXSIZE|SEQUENCE|PLOT|LINES|AREA|BOX|GRID|ZEROISVALUE|AGGREGATE|RECT|SUM|GRIDSIZE\",\n            \"colorscheme\": [\n                  \"#0079C6\",\n                  \"#0079C6\",\n                  \"#0079C6\",\n                  \"#0079C6\",\n                  \"#0079C6\",\n                  \"RGB(237,124,137)\",\n                  \"RGB(237,124,137)\"\n                  ],\n            \"shadow\": \"true\",\n            \"dbtable\": \"totale_incidenti_georef\",\n            \"dbtableUrl\": \"../../data/Palermo/_20032017144826.csv&gt;\",\n            \"dbtableType\": \"csv\",\n            \"dbtableExt\": \"preprocess.js\",\n            \"itemfield\": \"lat|lon\",\n            \"lookupfield\": \"lat|lon\",\n            \"values\": [\n                    \"1\",\n                    \"2\",\n                    \"3\",\n                    \"4\",\n                    \"5\",\n                    \"6\",\n                    \"0\"],\n            \"title\": \"Giorno della settimana\",\n            \"label\": [\n                    \"Lunedì\",\n                    \"Martedì\",\n                    \"Mercoledì\",\n                    \"Giovedì\",\n                    \"Venerdì\",\n                    \"Sabato\",\n                    \"Domenica\"],\n            \"xaxis\": [\n                    \"L\",\n                    \"M\",\n                    \"M\",\n                    \"G\",\n                    \"V\",\n                    \"S\",\n                    \"D\"],\n            \"scale\": \"1\",\n            \"minvalue\": \"0\",\n            \"normalsizevalue\":\"20\",\n            \"boxopacity\": \"0.1\",\n            \"gridwidth\": \"100px\",\n            \"title\": \"Incidenti Palermo 2016\",\n            \"snippet\": \"Incidenti aggregati per griglia geografica e per giorno della settimana\"\n            }\n    };</code></pre>\n<p>Quasi tutto viene descritto con la variable &#8216;type&#8217;</p>\n<pre><code>CHART|SYMBOL|EXACT|FIXSIZE|SEQUENCE|PLOT|LINES|AREA|BOX|GRID|ZEROISVALUE|NEGATIVEISVALUE|AGGREGATE|RECT|SUM|GRIDSIZE</code></pre>\n<ul>\n<li>CHART | SYMBOL | EXACT| FIXSIZE | SEQUENCE | PLOT | LINES | AREA<br />\nforse è un po&#8217; strano, ma definisce una curva come sequenza di simboli per ogni valore esatto (EXACT) della colonna di valori &#8216;GiornoDellaSettimana&#8217;; i valori ammessi sono definiti nal array &#8220;values&#8221;</li>\n<li>BOX | GRID<br />\nfa che la curva a un fondo</li>\n<li>ZEROISVALUE<br />\nammette zero come valore</li>\n<li>AGGREGATE | RECT | SUM<br />\ndefinisce l&#8217;aggregazione dei valori per una griglia rettangolare la quale dimensione viene definito con la variable &#8220;gridwidth&#8221; in 100 pixel (dello schermo);<br />\nqui vengono creati i valori delle curve; per ogni rettangolo della griglia si crea le somme degli incidenti per giorno della settimana; importante: &#8220;field&#8221; è &#8220;GiornoDellaSettimana&#8221; il &#8220;type&#8221; contiene &#8216;EXACT&#8217; e i valori sono definiti in &#8220;values&#8221;</li>\n<li>GRIDSIZE<br />\ndefinisce la dimensione dei grafici come la griglia</li>\n</ul>\n<h3>3. area tematica: Analisi di pericolosità</h3>\n<p>La 3° parte è un tentativo di creare un indice sintetico della pericolosità calcolando la somma degli incidenti con feriti o morti diviso per il numero di incidenti per una griglia esagonale. I risultante frazione viene normalizzato tra 0 e 1 e visualizzato con crescente opacità di colore e numero testuale.</p>\n<h2><a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-12.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1645\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-12.png?resize=1024%2C683&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"683\" srcset=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-12.png?w=1024&amp;ssl=1 1024w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-12.png?resize=300%2C200&amp;ssl=1 300w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-04-29-12.png?resize=768%2C512&amp;ssl=1 768w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a></h2>\n<h2>Creare mappe individualizzati e condividerle</h2>\n<p>Per ultimo vorrei promuovere la possibilità di creare mappe individualizzate da partire dei temi definiti e creare o un segnalibro o ottenere un codice per includere il tema personalizzato in una pagina HTML o in fine anche una URL unica per riprodurre la mappa creata in qualsiasi browser con capacità HTML5.</p>\n<p>Qui, per esempio, ho creato una visualizzazione &#8216;nuova&#8217; cambiando la mappa del fondo e selezionando solo una parte del tema nella leggenda. <a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-05-07-3.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1647\" src=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-05-07-2.png?resize=1024%2C615&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"615\" data-recalc-dims=\"1\" /></a></p>\n<p>Utilizzando l&#8217;icona &#8216;share&#8217; nel menu, si apre una finestrina con i codici per inserire la mappa e l&#8217;URL che contiene tutto il tema. <a href=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-05-07-2.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-1648\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2017/05/2017-05-07-3.png?resize=1024%2C598&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"598\" data-recalc-dims=\"1\" /></a>L&#8217;URL viene anche offerta in formato corto usando il servizio WEB tinyurl.com:<br />\n<a title=\"http://tinyurl.com/kayylhp\" href=\"http://tinyurl.com/kayylhp\">http://tinyurl.com/kayylhp</a> &#8211; Usando questo link si riproduce questa mappa.</p>\n<h3>Alcuni link</h3>\n<p>La <a href=\"http://projects.ixmaps.com.s3-website-eu-west-1.amazonaws.com/Palermo_Incidenti/app/Palermo_Incidenti/index_2016_full.html\">mappa interattiva</a><br />\nIl codice su <a href=\"https://github.com/gjrichter/PalermoIncidenti\">Github</a><br />\n<a href=\"http://alvarotrigo.com/fullPage/\">fullpage.js</a> di Alvaro Trigo<br />\n<a href=\"http://alvarotrigo.com/fullPage/\">bootstrap</a> HTML, CSS, and JS framework<br />\n<a href=\"https://icomoon.io/#preview-free\">icomoon</a> free Icon Pack</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1635\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1635\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1635\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2017/05/10/incidenti-stradali/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","date":"2017-05-10T09:10:31","author":{"node":{"name":"Guenter Richter","slug":"grichter"}},"comments":{"nodes":[{"content":"<p>Complimenti  bellissimo lavoro!</p>\n"}]},"categories":{"nodes":[{"name":"Dati","slug":"dati"},{"name":"formazione","slug":"formazione"},{"name":"mappe","slug":"mappe"}]},"tags":{"nodes":[{"name":"Comune di Palermo","slug":"comune-di-palermo"},{"name":"incidenti palermo","slug":"incidenti-palermo"},{"name":"palermo","slug":"palermo"}]},"featuredImage":{"node":{"localFile":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/f3c2af1bf20aeecafb030886ef9e723c/52836/2017-04-29-3.png","srcSet":"/static/f3c2af1bf20aeecafb030886ef9e723c/27d48/2017-04-29-3.png 256w,\n/static/f3c2af1bf20aeecafb030886ef9e723c/a83fc/2017-04-29-3.png 512w,\n/static/f3c2af1bf20aeecafb030886ef9e723c/52836/2017-04-29-3.png 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[]},"width":1024,"height":613}}}}}}]}},"pageContext":{"slug":"incidenti-stradali","uri":"/2017/05/10/incidenti-stradali/"}},
    "staticQueryHashes": ["67603594"]}