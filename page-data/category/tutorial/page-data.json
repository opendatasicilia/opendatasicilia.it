{
    "componentChunkName": "component---src-templates-category-js",
    "path": "/category/tutorial",
    "result": {"data":{"allWpPost":{"nodes":[{"title":"InformaCOVID, il Kit di Comunicazione Efficace per il tuo Comune","slug":"informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune","uri":"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/","excerpt":"<p>La comunità di Open Data Sicilia è lieta di invitarti alla presentazione del progetto &#8220;InformaCOVID &#8211; il Kit di Comunicazione Efficace per il tuo Comune&#8220;, che si svolgerà online martedì 25 maggio alle ore 17.&nbsp; Open Data Sicilia ha aderito sin da subito alla campagna&nbsp;#datibenecomune, unendosi alla richiesta di rendere disponibili, aperti, interoperabili (machine readable) [&hellip;]</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-2649\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-2649\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-2649\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","content":"<p><span style=\"font-weight: 400\">La comunità di Open Data Sicilia è lieta di invitarti alla presentazione del progetto &#8220;</span><b>InformaCOVID</b><i><span style=\"font-weight: 400\"> &#8211; il Kit di Comunicazione Efficace per il tuo Comune</span></i><b>&#8220;</b><span style=\"font-weight: 400\">, che si svolgerà online </span><b>martedì 25 maggio alle ore 17</b><span style=\"font-weight: 400\">.&nbsp;</span></p>\n<p><span style=\"font-weight: 400\">Open Data Sicilia ha aderito sin da subito alla campagna</span><a href=\"https://datibenecomune.it\"><span style=\"font-weight: 400\">&nbsp;#datibenecomune</span></a><span style=\"font-weight: 400\">, unendosi alla richiesta di rendere disponibili, aperti, interoperabili (</span><i><span style=\"font-weight: 400\">machine readable</span></i><span style=\"font-weight: 400\">) e disaggregati tutti i dati comunicati dalle Regioni al Governo dall’inizio della pandemia. Questo perché crediamo fortemente che anche i cittadini delle più piccole comunità abbiano il diritto di conoscere i dati che li riguardano e come essi variano nel tempo e di come varia la diffusione della pandemia nel proprio territorio.&nbsp;</span></p>\n<p><span style=\"font-weight: 400\">Da queste motivazioni nasce il progetto </span><b>InformaCOVID</b><span style=\"font-weight: 400\">, che mette assieme procedure guidate grazie alle quali tutti i comuni potranno avere a costo zero una piattaforma digitale, dinamica e interattiva, che consenta di comunicare i dati COVID in maniera trasparente ed efficace.</span></p>\n<p><span style=\"font-weight: 400\">Il progetto prevede un pacchetto di strumenti digitali gratuiti e scalabili per tutto il territorio nazionale, in grado di fornire alla cittadinanza un&#8217;informazione puntuale e rapida sull&#8217;andamento dei dati COVID19 del proprio comune, mediante un sistema informativo di facile utilizzo, fruibile da computer, tablet e smartphone.</span></p>\n<p><b>InformaCOVID</b><span style=\"font-weight: 400\"> è rivolto principalmente ai sindaci delle città italiane, </span><b>ma non solo</b><span style=\"font-weight: 400\">. Associazioni, scuole, testate giornalistiche, praticamente chiunque abbia accesso a dati COVID19 provenienti da fonti ufficiali e autorevoli, potrà utilizzare la piattaforma per informare la cittadinanza.</span></p>\n<p><span style=\"font-weight: 400\">Se il progetto ti ha incuriosito e vuoi saperne di più, non ti resta che segnare sul calendario la data del <strong>25 maggio</strong> e alle <strong>ore 17</strong> collegarti qui sotto&nbsp;&#x1f447;&nbsp;</span></p>\n<p><span class=\"embed-youtube\" style=\"text-align:center; display: block;\"><iframe loading=\"lazy\" class=\"youtube-player\" width=\"1140\" height=\"642\" src=\"https://www.youtube.com/embed/ZSrQbeaOeF4?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=it-IT&#038;autohide=2&#038;wmode=transparent\" allowfullscreen=\"true\" style=\"border:0;\" sandbox=\"allow-scripts allow-same-origin allow-popups allow-presentation\"></iframe></span></p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-2649\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-2649\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-2649\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2021/05/18/informacovid-il-kit-di-comunicazione-efficace-per-il-tuo-comune/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","date":"2021-05-18T16:23:39","author":{"node":{"name":"Giovanni Pirrotta","slug":"giovannipirrotta"}},"comments":{"nodes":[]},"categories":{"nodes":[{"name":"applicazioni","slug":"applicazioni"},{"name":"Comuni","slug":"comuni"},{"name":"Cose nostre","slug":"cose-nostre"},{"name":"covid-19","slug":"covid-19"},{"name":"Iniziative","slug":"iniziative"},{"name":"tutorial","slug":"tutorial"}]},"tags":{"nodes":[{"name":"informaCOVID","slug":"informacovid"}]},"featuredImage":{"node":{"localFile":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/288e902a69a38cbcbd398a71d1d74c7e/aeb79/social-card-preview.png","srcSet":"/static/288e902a69a38cbcbd398a71d1d74c7e/c636e/social-card-preview.png 100w,\n/static/288e902a69a38cbcbd398a71d1d74c7e/a1453/social-card-preview.png 200w,\n/static/288e902a69a38cbcbd398a71d1d74c7e/aeb79/social-card-preview.png 400w,\n/static/288e902a69a38cbcbd398a71d1d74c7e/47126/social-card-preview.png 800w","sizes":"(min-width: 400px) 400px, 100vw"},"sources":[]},"width":400,"height":225}}}}}},{"title":"OpenARS: una prima esplorazione dei dati","slug":"openars-una-prima-esplorazione-dei-dati","uri":"/2018/10/18/openars-una-prima-esplorazione-dei-dati/","excerpt":"<p>A meno di un mese da Open Data Sicilia 2018, che si terrà a Palermo il 9 e 10 novembre, entriamo adesso più nel vivo nel progetto OpenARS, i linked data dell’Assemblea Regionale Siciliana (ARS), che verrà presentato nel corso dell’evento. Nell’ultimo post ci eravamo lasciati con la presentazione dell’ontologia OpenARS, creata per descrivere in modo [&hellip;]</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1942\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1942\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1942\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","content":"<div>A meno di un mese da <strong><a href=\"http://ods2018.opendatasicilia.it\" target=\"_blank\" rel=\"noopener\">Open Data Sicilia 2018</a>,</strong> che si terrà a <strong>Palermo il 9 e 10 novembre</strong>, entriamo adesso più nel vivo nel progetto OpenARS, i linked data dell’Assemblea Regionale Siciliana (ARS), che verrà presentato nel corso dell’evento.</div>\n<div>Nell’<a href=\"http://opendatasicilia.it/2018/09/27/alla-scoperta-di-openars-i-linked-data-dellassemblea-regionale-siciliana/\" target=\"_blank\" rel=\"noopener\">ultimo post</a> ci eravamo lasciati con la presentazione dell’<a href=\"http://www.openars.org/core/index-en.html\" target=\"_blank\" rel=\"noopener\">ontologia OpenARS</a>, creata per descrivere in modo formale le diverse tipologie di dati dell’ARS e le loro interconnessioni.</div>\n<div>L’ontologia sviluppata consente di dare ad ogni risorsa un significato e di trasformare i dati dell’ARS in un enorme grafo direttamente interrogabile, esplorabile e riutilizzabile in altri contesti.</div>\n<div></div>\n<div><strong>Ma come li interroghiamo i dati?</strong></div>\n<div></div>\n<div>Per farlo è necessario introdurre il linguaggio principe usato nel Web Semantico per le interrogazioni, cioè il linguaggio <strong>SPARQL</strong>.</div>\n<div></div>\n<div>\n<div>Il linguaggio <strong>SPARQL</strong> è una <a href=\"https://www.w3.org/TR/sparql11-query/\" target=\"_blank\" rel=\"noopener\">raccomandazione W3C</a> che definisce in modo standard come interrogare i dati, a partire da grafi <strong>RDF</strong> distribuiti nel Web. Il criterio di interrogazione è basato su un meccanismo di <strong>pattern matching</strong>, nello specifico dal costrutto <strong>triple pattern</strong>, che riflette il modello di asserzioni RDF delle triple e fornisce un modello flessibile per le ricerche.</div>\n</div>\n<div></div>\n<div>\n<div>Lo schema generico di un’interrogazione SPARQL è il seguente:</div>\n<div>\n<pre class=\"lang:default decode:true\">PREFIX ex: &lt;http://example.org/&gt;\nSELECT ...\nFROM ... \nWHERE { ... } \nORDER BY ...</pre>\n<div>dove</div>\n<ul>\n<li>\n<div><strong>PREFIX</strong> è la clausola che definisce prefissi e namespace, comoda per abbreviare le <em>URI</em>;</div>\n</li>\n<li>\n<div><strong>SELECT</strong> è la clausola che definisce le informazioni che vogliamo estrarre dal repository;</div>\n</li>\n<li>\n<div><strong>FROM</strong> è la clausola che definisce il grafo (o i grafi) da esplorare. Può essere sia locale sia remoto. Possiamo anche inserire clausole come <strong>FROM</strong> <strong>NAMED</strong> e <strong>GRAPH</strong> per specificare sorgenti dati multipli;</div>\n</li>\n<li>\n<div><strong>WHERE</strong> è la clausola che definisce il pattern del grafo che intendiamo cercare nel dataset; rappresenta la parte più importante della query;</div>\n</li>\n<li>\n<div><strong>ORDER</strong> <strong>BY</strong> è la clausola che mi consente di ordinare i risultati della ricerca.</div>\n</li>\n</ul>\n<div>Immaginiamo di avere un dataset contenente un insieme di <strong>libri</strong> (<em>risorse</em>) descritti da una specifica ontologia nel file <strong>book.rdf</strong>, pubblicato nel Web secondo i principi dei <a href=\"https://www.w3.org/DesignIssues/LinkedData.html\" target=\"_blank\" rel=\"noopener\">Linked Data</a>. Immaginiamo di identificare il dataset nel Web col seguente URL:</div>\n<div><em><span class=\"lang:default decode:true crayon-inline \">http://example.org/books.rdf</span> .</em></div>\n<div>Il nostro obiettivo è conoscere tutti i libri presenti del dataset con i relativi autori; per fare questo dobbiamo estrarre tutte le risorse di tipo <strong>libro</strong> (<em>?book</em>) e tutte le <strong>persone</strong> (<em>?person</em>) che sono <strong>autori</strong> (<em>ex:hasAuthor</em>) dei <strong>libri</strong>. Dei libri vogliamo conoscere i <strong>titoli</strong> (<em>?book_title</em>) e i <strong>nomi</strong> e <strong>cognomi</strong> degli autori (<em>?person_name</em>, <em>?person_surname</em>).</div>\n<div></div>\n</div>\n<div>\n<div>La query di interrogazione sarà la seguente:</div>\n</div>\n<div>\n<pre class=\"lang:default decode:true\">PREFIX ex: &lt;http://example.org/&gt; \nSELECT ?book_title ?person_name ?person_surname \nFROM &lt;http://example.org/books.rdf&gt; \nWHERE { ?book a ex:Book; \n              ex:title ?book_title; \n              ex:hasAuthor ?person. \n        ?person ex:name ?person_name; \n                ex:surname ?person_surname. \n}</pre>\n<div>e questo un ipotetico risultato</div>\n<div></div>\n</div>\n<div><a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql1.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone wp-image-1943 size-full\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql1.png?resize=680%2C150&#038;ssl=1\" alt=\"\" width=\"680\" height=\"150\" srcset=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql1.png?w=680&amp;ssl=1 680w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql1.png?resize=300%2C66&amp;ssl=1 300w\" sizes=\"(max-width: 680px) 100vw, 680px\" data-recalc-dims=\"1\" /></a></div>\n</div>\n<div></div>\n<div></div>\n<div>\n<div>Passiamo adesso ad <strong>OpenARS</strong> e proviamo ad effettuare un’interrogazione reale direttamente sul suo <strong>repository</strong>. A differenza del file pubblicato nell’esempio precedente i dati di OpenARS sono caricati su un server di storage dedicato che contiene l’intera base di conoscenza nella forma di triple/asserzioni . Per poter effettuare delle interrogazioni sui dati  è necessario conoscere l’URL punto di ingresso, conosciuto con il nome di <a href=\"http://virtuosa.pa2.itd.cnr.it:8890/sparql\" target=\"_blank\" rel=\"noopener\"><strong>SPARQL endpoint</strong></a>.</div>\n<div></div>\n<div>E’ possibile effettuare l’interrogazione direttamente dal client Web fornito dal triple store, come nella figura sottostante oppure è possibile eseguire query SPARQL da codice sorgente di un qualsiasi linguaggio di programmazione se si vogliono sviluppare applicazioni che interagiscono con i dati.</div>\n</div>\n<div></div>\n<div><a href=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql2.png?ssl=1\"><img loading=\"lazy\" class=\"alignnone wp-image-1944 size-large\" src=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql2.png?resize=1024%2C518&#038;ssl=1\" alt=\"\" width=\"1024\" height=\"518\" srcset=\"https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql2.png?resize=1024%2C518&amp;ssl=1 1024w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql2.png?resize=300%2C152&amp;ssl=1 300w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql2.png?resize=768%2C389&amp;ssl=1 768w, https://i2.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql2.png?w=1223&amp;ssl=1 1223w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" data-recalc-dims=\"1\" /></a></div>\n<div>\n<div>Prima di effettuare qualsiasi tipo di ricerca è fondamentale conoscere <strong>l’ontologia</strong> di riferimento al fine di poter interrogare correttamente i dati per tipologie di classi e per connessioni esistenti tra le risorse.</div>\n<div></div>\n<div>Facciamo adesso qualche esempio di interrogazione relativa a <strong>statistiche</strong> sull’attività legislativa dell’ARS. Per esempio, vogliamo sapere <em>quanti disegni di legge sono stati presentati nel corso della 16° legislatura.</em></div>\n<div></div>\n<div>La query SPARQL è la seguente:</div>\n<div>\n<pre class=\"lang:default decode:true \">PREFIX ars: &lt;http://www.openars.org/core#&gt;\nSELECT count(?ddl)\nFROM &lt;http://www.openars.org/9/&gt;\nWHERE {\n?ddl a ars:DisegnoDiLegge;\n      ars:legislatura &lt;http://dati.openars.org/legislatura/xvi&gt;\n}</pre>\n<div>che restituirà come risultato il valore 1346.  <strong><a href=\"http://virtuosa.pa2.itd.cnr.it:8890/sparql?default-graph-uri=http%3A%2F%2Fwww.openars.org%2F7%2F&amp;query=PREFIX+ars%3A+%3Chttp%3A%2F%2Fwww.openars.org%2Fcore%23%3E%0D%0ASELECT+count%28%3Fitem%29%0D%0AFROM+%3Chttp%3A%2F%2Fwww.openars.org%2F9%2F%3E%0D%0AWHERE+%7B%0D%0A%3Fitem+a+ars%3ADisegnoDiLegge%3B%0D%0A+++++ars%3Alegislatura+%3Chttp%3A%2F%2Fdati.openars.org%2Flegislatura%2Fxvi%3E%0D%0A%7D&amp;format=text%2Fhtml&amp;timeout=0&amp;debug=on\" target=\"_blank\" rel=\"noopener\">Provare</a></strong> per credere.</div>\n<div></div>\n<div>La query assomiglia molto al linguaggio SQL e risulta di per sé molto leggibile. Nel campo <strong>WHERE</strong> selezioniamo tutte le risorse dello store di tipo a<strong>rs:DisegnoDiLegge</strong> che sono collegate, tramite la proprietà <strong>ars:legislatura</strong>, alla risorsa che identifica la sedicesima legislatura (<span class=\"lang:default decode:true crayon-inline \">http://dati.openars.org/legislatura/xvi</span> ).</div>\n<div>La selezione restituisce un certo numero di istanze e nel campo <strong>SELECT</strong> decidiamo di calcolare il numero totale di tali istanze, tramite l’operatore di aggregazione count, che corrisponde al numero totale di disegni di legge della 16° legislatura.</div>\n<div></div>\n<div>Vediamo adesso qualcosa un pò più complesso.</div>\n<div></div>\n<div>Voglio sapere <em>la classifica top ten  dei disegni di legge presentati nella 16° legislatura suddivisa per materia. </em></div>\n<div></div>\n<div>La query SPARQL è la seguente:</div>\n</div>\n<div>\n<pre class=\"lang:default decode:true \">PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nPREFIX ars: &lt;http://www.openars.org/core#&gt;\nPREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;\n\nSELECT ?nomeMateria count(?ddl) as ?num\nFROM &lt;http://www.openars.org/9/&gt;\nWHERE {\n?topic a ars:Materia.\n?ddl a ars:DisegnoDiLegge;\n     ars:materia ?topic;\n     ars:legislatura &lt;http://dati.openars.org/legislatura/xvi&gt;.\n?topic ars:nomeMateria ?nomeMateria.\n      }\nGROUP BY ?nomeMateria\nORDER BY DESC(?num)\nLIMIT 10</pre>\n<div>\n<p>Questo il <a href=\"http://virtuosa.pa2.itd.cnr.it:8890/sparql?default-graph-uri=http%3A%2F%2Fwww.openars.org%2F9%2F&amp;query=PREFIX+rdf%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%3E%0D%0APREFIX+ars%3A+%3Chttp%3A%2F%2Fwww.openars.org%2Fcore%23%3E%0D%0APREFIX+foaf%3A+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0D%0A%0D%0ASELECT+%3FnomeMateria+count%28%3Fddl%29+as+%3Fnum%0D%0AFROM+%3Chttp%3A%2F%2Fwww.openars.org%2F9%2F%3E%0D%0AWHERE+%7B%0D%0A%3Ftopic+a+ars%3AMateria.%0D%0A%3Fddl+a+ars%3ADisegnoDiLegge%3B%0D%0A+++++ars%3Amateria+%3Ftopic%3B%0D%0A+++++ars%3Alegislatura+%3Chttp%3A%2F%2Fdati.openars.org%2Flegislatura%2Fxvi%3E.%0D%0A%3Ftopic+ars%3AnomeMateria+%3FnomeMateria.%0D%0A++++++%7D%0D%0AGROUP+BY+%3FnomeMateria%0D%0AORDER+BY+DESC%28%3Fnum%29%0D%0ALIMIT+10&amp;format=text%2Fhtml&amp;timeout=0&amp;debug=on\"><strong>risultato</strong></a>:</p>\n</div>\n</div>\n<div><a href=\"https://i0.wp.com/opendatasicilia.it/wp-content/uploads/2018/10/sparql3.png?ssl=1\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained alignnone wp-image-1945 size-full inline-gatsby-image-wrapper\" data-reactroot=\"\"><div style=\"max-width:260px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;282&#x27; width=&#x27;260&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><picture><source type=\"image/webp\" data-srcset=\"/static/e9ae97bbf2b61a48fe514cf4399a777b/d8a94/sparql3.webp 65w,/static/e9ae97bbf2b61a48fe514cf4399a777b/7bb94/sparql3.webp 130w,/static/e9ae97bbf2b61a48fe514cf4399a777b/33c75/sparql3.webp 260w\" sizes=\"(min-width: 260px) 260px, 100vw\"/><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 260px) 260px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/static/e9ae97bbf2b61a48fe514cf4399a777b/ec606/sparql3.png\" data-srcset=\"/static/e9ae97bbf2b61a48fe514cf4399a777b/b0673/sparql3.png 65w,/static/e9ae97bbf2b61a48fe514cf4399a777b/d9631/sparql3.png 130w,/static/e9ae97bbf2b61a48fe514cf4399a777b/ec606/sparql3.png 260w\" alt=\"\"/></picture><noscript><picture><source type=\"image/webp\" srcSet=\"/static/e9ae97bbf2b61a48fe514cf4399a777b/d8a94/sparql3.webp 65w,/static/e9ae97bbf2b61a48fe514cf4399a777b/7bb94/sparql3.webp 130w,/static/e9ae97bbf2b61a48fe514cf4399a777b/33c75/sparql3.webp 260w\" sizes=\"(min-width: 260px) 260px, 100vw\"/><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 260px) 260px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/static/e9ae97bbf2b61a48fe514cf4399a777b/ec606/sparql3.png\" srcSet=\"/static/e9ae97bbf2b61a48fe514cf4399a777b/b0673/sparql3.png 65w,/static/e9ae97bbf2b61a48fe514cf4399a777b/d9631/sparql3.png 130w,/static/e9ae97bbf2b61a48fe514cf4399a777b/ec606/sparql3.png 260w\" alt=\"\"/></picture></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"1\">{\"image\":{\"layout\":\"constrained\",\"backgroundColor\":\"#f8f8f8\",\"images\":{\"fallback\":{\"src\":\"/static/e9ae97bbf2b61a48fe514cf4399a777b/ec606/sparql3.png\",\"srcSet\":\"/static/e9ae97bbf2b61a48fe514cf4399a777b/b0673/sparql3.png 65w,\\n/static/e9ae97bbf2b61a48fe514cf4399a777b/d9631/sparql3.png 130w,\\n/static/e9ae97bbf2b61a48fe514cf4399a777b/ec606/sparql3.png 260w\",\"sizes\":\"(min-width: 260px) 260px, 100vw\"},\"sources\":[{\"srcSet\":\"/static/e9ae97bbf2b61a48fe514cf4399a777b/d8a94/sparql3.webp 65w,\\n/static/e9ae97bbf2b61a48fe514cf4399a777b/7bb94/sparql3.webp 130w,\\n/static/e9ae97bbf2b61a48fe514cf4399a777b/33c75/sparql3.webp 260w\",\"type\":\"image/webp\",\"sizes\":\"(min-width: 260px) 260px, 100vw\"}]},\"width\":260,\"height\":282},\"alt\":\"\",\"className\":\"alignnone wp-image-1945 size-full inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"1\"}</script></a></div>\n</div>\n<div></div>\n<div>\n<div><strong>Alcune considerazioni finali:</strong></div>\n<ul>\n<li>\n<div>questi sono solo piccoli esempi che si possono fare con i dati ARS, nel prossimo post presenteremo casi molto più complessi che prenderanno in considerazione interrogazioni a sorgenti dati multipli;</div>\n</li>\n<li>\n<div>passando dal <strong>Web di documenti</strong> al <strong>Web di dati</strong> (<em>linked-data</em>), il Web diventa <strong>machine-understandable</strong> e il tutto risulta esponenzialmente vantaggioso in termini di flessibilità e di interoperabilità semantica;</div>\n</li>\n<li>\n<div>con la pubblicazione dei dati in modalità linked il Web diventa <strong>data-centric</strong> e le possibili interrogazioni dei dati, grazie alle loro interconnessioni, sia dentro che fuori al dataset, diventano pressoché infinite e delle più disparate;</div>\n</li>\n<li>\n<div>\n<p><strong>non ci credete?</strong> provate a reperire nel Web tradizionale <em>i nomi di <strong>TUTTI</strong> i sindaci le cui città hanno lo stesso patrono della città collegio di elezione di un qualsiasi deputato dell’ARS</em></p>\n<p>Nel prossimo post vedremo quanto sarà facile farlo con OpenARS.</p>\n</div>\n</li>\n</ul>\n<div>Alcuni link per approfondire il linguaggio SPARQL</div>\n<ul>\n<li><a href=\"https://www.w3.org/2009/Talks/0615-qbe/\" target=\"_blank\" rel=\"noopener\">SPARQL By Example &#8211; A Tutorial</a></li>\n<li><a href=\"http://learningsparql.com/resources/index.html\" target=\"_blank\" rel=\"noopener\">Learning SPARQL</a></li>\n<li><a href=\"https://programminghistorian.org/en/lessons/graph-databases-and-SPARQL\" target=\"_blank\" rel=\"noopener\">Using SPARQL to access Linked Open Data</a></li>\n<li><a href=\"https://docs.data.world/tutorials/sparql/Your_First_Sparql_Query.html\" target=\"_blank\" rel=\"noopener\">Your First SPARQL Query</a></li>\n</ul>\n<div><strong>p.s.</strong> le iscrizioni al raduno sono ancora aperte. I posti sono gratuiti ma limitati. Per maggiori informazioni <a href=\"http://ods2018.opendatasicilia.it\" target=\"_blank\" rel=\"noopener\">questo</a> è il sito dell&#8217;evento.</div>\n</div>\n<div></div>\n<div>Alla prossima</div>\n<div></div>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1942\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1942\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1942\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2018/10/18/openars-una-prima-esplorazione-dei-dati/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","date":"2018-10-18T06:14:47","author":{"node":{"name":"Giovanni Pirrotta","slug":"giovannipirrotta"}},"comments":{"nodes":[]},"categories":{"nodes":[{"name":"Dati","slug":"dati"},{"name":"eventi","slug":"eventi"},{"name":"Raduni","slug":"raduni"},{"name":"tools","slug":"tools"},{"name":"tutorial","slug":"tutorial"}]},"tags":{"nodes":[{"name":"ods18","slug":"ods18"},{"name":"openars","slug":"openars"},{"name":"semantic-web","slug":"semantic-web"},{"name":"sparql","slug":"sparql"}]},"featuredImage":{"node":{"localFile":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#082838","images":{"fallback":{"src":"/static/2ca66867dc10752844e1f5ebb411863e/af3f1/sparql1.png","srcSet":"/static/2ca66867dc10752844e1f5ebb411863e/af00b/sparql1.png 100w,\n/static/2ca66867dc10752844e1f5ebb411863e/c74b3/sparql1.png 200w,\n/static/2ca66867dc10752844e1f5ebb411863e/af3f1/sparql1.png 400w","sizes":"(min-width: 400px) 400px, 100vw"},"sources":[]},"width":400,"height":87.99999999999999}}}}}},{"title":"Come abbiamo creato un «Read the Docs» per pubblicare documenti pubblici su Docs Italia","slug":"come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia","uri":"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/","excerpt":"<p>Questa storia nasce dal Team Trasformazione Digitale dell&#8217;AgID che inizia a pubblicare documentazione della Pubblica Amministrazione su un formato online nuovo che si chiama Read the Docs. Read the Docs (RTD) è un formato che permette di leggere testo su dispositivi mobili adattandosi alle dimensioni del display e consente di cercare parole nel testo attraverso [&hellip;]</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1761\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1761\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1761\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","content":"<p><a href=\"https://i1.wp.com/opendatasicilia.it/wp-content/uploads/2018/04/docs-.png?ssl=1\"><div data-gatsby-image-wrapper=\"\" style=\"position:relative;overflow:hidden;display:inline-block;vertical-align:top\" class=\"gatsby-image-wrapper gatsby-image-wrapper-constrained alignleft size-full wp-image-1763 inline-gatsby-image-wrapper\" data-reactroot=\"\"><div style=\"max-width:478px;display:block\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;351&#x27; width=&#x27;478&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E\" style=\"max-width:100%;display:block;position:static\"/></div><div aria-hidden=\"true\" data-placeholder-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;width:100%\"></div><picture><source type=\"image/webp\" data-srcset=\"/static/19966bb0865e8adb04dad4214840829a/ef2c4/docs-.webp 120w,/static/19966bb0865e8adb04dad4214840829a/a4794/docs-.webp 239w,/static/19966bb0865e8adb04dad4214840829a/13d20/docs-.webp 478w\" sizes=\"(min-width: 478px) 478px, 100vw\"/><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 478px) 478px, 100vw\" decoding=\"async\" loading=\"lazy\" data-src=\"/static/19966bb0865e8adb04dad4214840829a/083d6/docs-.png\" data-srcset=\"/static/19966bb0865e8adb04dad4214840829a/986a4/docs-.png 120w,/static/19966bb0865e8adb04dad4214840829a/5ab01/docs-.png 239w,/static/19966bb0865e8adb04dad4214840829a/083d6/docs-.png 478w\" alt=\"\"/></picture><noscript><picture><source type=\"image/webp\" srcSet=\"/static/19966bb0865e8adb04dad4214840829a/ef2c4/docs-.webp 120w,/static/19966bb0865e8adb04dad4214840829a/a4794/docs-.webp 239w,/static/19966bb0865e8adb04dad4214840829a/13d20/docs-.webp 478w\" sizes=\"(min-width: 478px) 478px, 100vw\"/><img data-gatsby-image-ssr=\"\" data-wp-inline-image=\"1\" data-main-image=\"\" style=\"height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0\" sizes=\"(min-width: 478px) 478px, 100vw\" decoding=\"async\" loading=\"lazy\" src=\"/static/19966bb0865e8adb04dad4214840829a/083d6/docs-.png\" srcSet=\"/static/19966bb0865e8adb04dad4214840829a/986a4/docs-.png 120w,/static/19966bb0865e8adb04dad4214840829a/5ab01/docs-.png 239w,/static/19966bb0865e8adb04dad4214840829a/083d6/docs-.png 478w\" alt=\"\"/></picture></noscript><script type=\"module\">const t=\"undefined\"!=typeof HTMLImageElement&&\"loading\"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(\"img[data-main-image]\");for(let e of t){e.dataset.src&&(e.setAttribute(\"src\",e.dataset.src),e.removeAttribute(\"data-src\")),e.dataset.srcset&&(e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\"));const t=e.parentNode.querySelectorAll(\"source[data-srcset]\");for(let e of t)e.setAttribute(\"srcset\",e.dataset.srcset),e.removeAttribute(\"data-srcset\");e.complete&&(e.style.opacity=1)}}</script></div><script type=\"application/json\" data-wp-inline-image-hydration=\"1\">{\"image\":{\"layout\":\"constrained\",\"backgroundColor\":\"#f8f8f8\",\"images\":{\"fallback\":{\"src\":\"/static/19966bb0865e8adb04dad4214840829a/083d6/docs-.png\",\"srcSet\":\"/static/19966bb0865e8adb04dad4214840829a/986a4/docs-.png 120w,\\n/static/19966bb0865e8adb04dad4214840829a/5ab01/docs-.png 239w,\\n/static/19966bb0865e8adb04dad4214840829a/083d6/docs-.png 478w\",\"sizes\":\"(min-width: 478px) 478px, 100vw\"},\"sources\":[{\"srcSet\":\"/static/19966bb0865e8adb04dad4214840829a/ef2c4/docs-.webp 120w,\\n/static/19966bb0865e8adb04dad4214840829a/a4794/docs-.webp 239w,\\n/static/19966bb0865e8adb04dad4214840829a/13d20/docs-.webp 478w\",\"type\":\"image/webp\",\"sizes\":\"(min-width: 478px) 478px, 100vw\"}]},\"width\":478,\"height\":351},\"alt\":\"\",\"className\":\"alignleft size-full wp-image-1763 inline-gatsby-image-wrapper\",\"data-wp-inline-image\":\"1\"}</script></a></p>\n<p>Questa storia nasce dal Team Trasformazione Digitale dell&#8217;AgID che inizia a pubblicare <a href=\"https://docs.developers.italia.it/\">documentazione della Pubblica Amministrazione</a> su un formato online nuovo che si chiama <a href=\"https://readthedocs.org/\"><strong>Read the Docs</strong>.</a></p>\n<p>Read the Docs (RTD) è un formato che permette di leggere testo su dispositivi mobili adattandosi alle dimensioni del display e consente di cercare parole nel testo attraverso uno spazio apposito. Già solo queste due caratteristiche lo fanno preferire al classico formato PDF usato per la maggiore nei siti web della PA. Purtroppo il PDF non si adatta ai dispositivi mobili e non consente un agevole ricerca di testo al suo interno.</p>\n<p>Per arrivare alla pubblicazione di documenti su RTD è necessario compilare file nel linguaggio <strong>RST</strong> (reStructruredText) e renderli disponibili in progetti dentro il repository di Github.</p>\n<p>Dopo che il Team Trasformazione Digitale inizia la pubblicazione di documenti della PA su RTD, <a href=\"http://bit.do/readthedocs-entipubblici\">alcuni dipendenti di PA cominciamo a pubblicare documenti pubblici su questo formato</a>  e il risultato è senza dubbio molto gradevole e comodo ai fini della lettura su ogni dimensione di schermo.</p>\n<p>Come ogni fenomeno nuovo c&#8217;è sempre l&#8217;aspetto e il ruolo pionieristico che è importante per fare da traino per gli altri. Ed è così che ci ritroviamo <strong>Ciro Spataro</strong> (Comune di Palermo) e <strong>Pablo Persico</strong> (Città Metropolitana di Napoli) a scambiarci idee e proposte per pubblicare documenti pubblici su Read the Docs, e fra un messaggio e un altro arriviamo alla conclusione condivisa che sarebbe utile e bello costruire un <strong>tutorial sulle modalità di costruzione di un documento da pubblicare Read the Docs</strong>: da dove partire e tutte le procedure da seguire. Cominciamo a lavorarci condividendo un Google doc all&#8217;inizio, e strutturiamo didatticamente il tutorial in 2 parti: una in cui si spiega una procedura per chi non è molto addentro alle procedure di compilazione e versionamento dei documenti e una per i più esperti. Questo al fine di arrivare ad ogni tipologia di dipendente pubblico in fatto di competenze digitali.</p>\n<p>All&#8217;iniziativa prende parte <strong>Andrea Borruso</strong> per la supervisione dell&#8217;intero lavoro didattico, vista la sua attitudine e piacere a &#8220;spiegare bene&#8221; le cose.</p>\n<p>Quello che ci ha preso maggiormente in questa iniziativa è stata la voglia di vedere i documenti della Pubblica Amministrazione visualizzati come mai ad oggi è stato fatto. Una sorta di vendetta contro un PDF scomodo 😉</p>\n<p>Dal Read the Docs creato è possibile ottenere, automaticamente dalla stessa piattaforma, il documento in formato <strong>PDF</strong>,  <strong>EPUB</strong><b> </b>ed<strong> HTML</strong> (zippato). Quindi per coloro che non possono rinunciare al PDF non c&#8217;è la possibilità di alcun trauma psicologico.</p>\n<p>Il resto lo potete leggere nel Read the Docs <a href=\"http://come-creare-guida.readthedocs.io\">http://come-creare-guida.readthedocs.io</a></p>\n<p>&nbsp;</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1761\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1761\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1761\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2018/04/03/come-abbiamo-creato-un-read-the-docs-per-pubblicare-documenti-pubblici-su-docs-italia/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","date":"2018-04-03T10:45:08","author":{"node":{"name":"Ciro Spataro","slug":"cirospat"}},"comments":{"nodes":[]},"categories":{"nodes":[{"name":"Amministrazione trasparente","slug":"amministrazione-trasparente"},{"name":"community","slug":"community"},{"name":"Esperimenti","slug":"esperimenti"},{"name":"Iniziative","slug":"iniziative"},{"name":"tutorial","slug":"tutorial"}]},"tags":{"nodes":[{"name":"AGID","slug":"agid"},{"name":"Github","slug":"github"},{"name":"MD","slug":"md"},{"name":"PA","slug":"pa"},{"name":"pdf","slug":"pdf"},{"name":"read the docs","slug":"read-the-docs"},{"name":"RST","slug":"rst"},{"name":"Team Trasformazione Digitale","slug":"team-trasformazione-digitale"},{"name":"tutorial","slug":"tutorial"}]},"featuredImage":null},{"title":"Leggere, interrogare e trasformare file XML da riga di comando","slug":"leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando","uri":"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/","excerpt":"<p>Intro Il comune di Palermo ha pubblicato i dati pubblici e aperti sulle elezioni comunali dell&#8217;11 giugno 2017 in formato XML, con uno schema descritto in questo file. Qui sotto ad esempio la struttura di uno degli oltre 200 file pubblicati. L&#8217;XML è uno dei formati classici di pubblicazione di dati aperti, ma non è un formato per [&hellip;]</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1686\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1686\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1686\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","content":"<h1 id=\"intro\">Intro</h1>\n<p>Il comune di Palermo ha pubblicato i <a href=\"https://docs.google.com/spreadsheets/d/1gKrvPb82AAIi0lA_vJGdAhm0fd-Fp_hC5MiFhjhjbp8/edit?usp=sharing\">dati pubblici e aperti</a> sulle elezioni comunali dell&#8217;11 giugno 2017 in formato <code>XML</code>, con uno schema descritto in <a href=\"https://www.comune.palermo.it/js/server/uploads/opendata/MetaDatiElezioniAmministrative.pdf\">questo file</a>.</p>\n<p>Qui sotto ad esempio la struttura di uno degli oltre 200 file pubblicati.</p>\n<p><img class=\"aligncenter\" src=\"https://i2.wp.com/i.imgur.com/yvtRPCD.png?w=1140\" alt=\"\" data-recalc-dims=\"1\" /></p>\n<p>L&#8217;<code>XML</code> è uno dei formati classici di pubblicazione di dati aperti, ma non è un formato per tutti. Molti utenti infatti non sono in grado di esaminarli.<br />\nPer la sua natura è facilmente leggibile da un calcolatore e ci sono varie modalità per farlo.</p>\n<p>E con un&#8217;<em>utility</em> specializzata (XMLStarlet) e con un piccolo comando come questo di sotto, è possibile trasformare <a href=\"http://comunali2017.comune.palermo.it/SEZ_3_82053_L12.xml\">questo</a> file XML in una &#8220;piatta&#8221; tabella con tutti i dati sui voti dei candidati di una lista al consiglio comunale, per ogni sezione elettorale (40 candidati per 600 sezioni, quindi 24000 record).</p>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">xmlstarlet sel &#8211;net -t -m <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>//SV/V0/V1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> \\</span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">-v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@VOTIVALIDI_C1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>  -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> \\</span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">-v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -n \\</span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">http://comunali2017.comune.palermo.it/SEZ_3_82053_L12.xml</span></div>\n<p>&nbsp;</p>\n<p>Qui sotto lo vedete in azione:</p>\n<p><img class=\"aligncenter\" src=\"https://i1.wp.com/media.giphy.com/media/wabofHvckuI5a/giphy.gif?w=1140&#038;ssl=1\" alt=\"\" data-recalc-dims=\"1\" /></p>\n<p>I dati sui risultati delle liste elettorali hanno questa struttura:</p>\n<div class=\"line\"><span class=\"syntax--text syntax--xml\"><span class=\"syntax--meta syntax--tag syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&lt;</span><span class=\"syntax--entity syntax--name syntax--tag syntax--localname syntax--xml\">SV</span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NUMERO</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NOME</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>SEZIONE 1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NOMEBREVE</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>SEZ. 1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">UBICAZIONE</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NUM_ZONA</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NUM_ZONA2</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">TOTVOT</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>540<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">TOTVOTM</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>255<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">TOTVOTF</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>285<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">FLZEROVOT</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>N<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">ELETTORI</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>1112<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">ELETTORIM</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>556<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">ELETTORIF</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>556<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">CONFERMATO</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>S<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VOTIVALIDI_C0</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>54<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VOTIVALIDI_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>37<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VCAS_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>0&#8243; VCNAS_C1=&#8221;0&#8243; VOTI_SOLO_C1=&#8221;0&#8243; VOTIVALIDI_C2=&#8221;0&#8243; VCAS_C2=&#8221;0&#8243; VCNAS_C2=&#8221;0&#8243; VCNAS_TOT=&#8221;0&#8243; VOTI_SOLO_C2=&#8221;0&#8243; VOTI_NULLI_SOLO_C2=&#8221;0&#8243; VOTI_NULLI=&#8221;0&#8243; NULLE=&#8221;21&#8243; BIANCHE=&#8221;8&#8243; CONFCONS=&#8221;S&#8221; MAXVOTVAL=&#8221;9&#8243;&gt;</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--xml\">        <span class=\"syntax--meta syntax--tag syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&lt;</span><span class=\"syntax--entity syntax--name syntax--tag syntax--localname syntax--xml\">V0</span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NUMERO</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>12<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VOTIVALIDI_C0</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>54<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">TOT_VOTIVALIDI_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>37<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">TOT_VOTISOLO_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>0<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&gt;</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--xml\">            <span class=\"syntax--meta syntax--tag syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&lt;</span><span class=\"syntax--entity syntax--name syntax--tag syntax--localname syntax--xml\">V1</span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NUMERO</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VOTIVALIDI_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>5<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VOTISOLO_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>0<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VOTCONASS_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>0<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">VOTCONNONASS_C1</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>0<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">CIFRAIND</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>59<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">TOT_VOTIVALIDI_C2</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>0<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">TOT_VOTISOLO_C2</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>0<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">/&gt;</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--xml\">            <span class=\"syntax--meta syntax--tag syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&lt;</span><span class=\"syntax--entity syntax--name syntax--tag syntax--localname syntax--xml\">V1</span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NUMERO</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>2<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> &#8230;<span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">/&gt;</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--xml\">            <span class=\"syntax--meta syntax--tag syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&lt;</span><span class=\"syntax--entity syntax--name syntax--tag syntax--localname syntax--xml\">V1</span> <span class=\"syntax--entity syntax--other syntax--attribute-name syntax--localname syntax--xml\">NUMERO</span>=<span class=\"syntax--string syntax--quoted syntax--double syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--xml\">&#8220;</span>3<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--xml\">&#8220;</span></span> &#8230;<span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">/&gt;</span></span>        </span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--xml\">        <span class=\"syntax--meta syntax--tag syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&lt;/</span><span class=\"syntax--entity syntax--name syntax--tag syntax--localname syntax--xml\">V0</span><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&gt;</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--xml\"><span class=\"syntax--meta syntax--tag syntax--xml\"><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&lt;/</span><span class=\"syntax--entity syntax--name syntax--tag syntax--localname syntax--xml\">SV</span><span class=\"syntax--punctuation syntax--definition syntax--tag syntax--xml\">&gt;</span></span></span></div>\n<p>&nbsp;</p>\n<p><code>SV</code> è la sezione elettorale con il suo numero identificativo (e altri attributi), che contiene al suo interno i dati su <code>V0</code> che rappresenta la lista (in questo caso la 12, quella del &#8220;Movimento 5 stelle&#8221;), che contiene al suo interno <code>V1</code>, ovvero i dati sui candidati al consiglio comunale. Con questa struttura gerarchica <code>SV&gt;V0&gt;V1</code>.</p>\n<p>Il comando di sopra nel dettaglio:</p>\n<ul>\n<li><code>sel --net -t -m</code>, abilito la selezione (<code>sel</code>) su un file remoto (<code>--net</code>), impostando un template (<code>-t</code>) per &#8220;mappare&#8221; gli elementi che corrispondono (&#8220;matchano&#8221; <code>-m</code>) alla seguente <em>query</em> XPATH;</li>\n<li><code>\"//SV/V0/V1\"</code>, i candidati al consiglio;</li>\n<li><code>\"@NUMERO\"</code>, l&#8217;attributo con il numero identificativo del candidato;</li>\n<li><code>-o \",\"</code>, per inserire un separatore di testo;</li>\n<li><code>-v \"@VOTIVALIDI_C1\"</code>, l&#8217;attributo con i voti validi del candidato;</li>\n<li><code>-o \",\"</code>, per inserire un separatore di testo;</li>\n<li><code>-v \"../@NUMERO\"</code>, mi muovo verso l&#8217;alto nella gerarchia dell&#8217;<code>XML</code> di un gradino con <code>..</code>, quindi vado in <code>V0</code> (la lista) e recupero l&#8217;identificativo numerico della lista;</li>\n<li><code>-o \",\"</code>, per inserire un separatore di testo;</li>\n<li><code>-v \"../../@NUMERO\"</code>, mi muovo verso l&#8217;alto nella gerarchia dell&#8217;<code>XML</code> di due gradini con <code>../..</code>, quindi vado in <code>SV</code> (il seggio) e recupero l&#8217;identificativo numerico del seggio;</li>\n<li><code>-n</code>, per inserire un&#8217;andata a capo per ogni risultato ottenuto;</li>\n<li><a href=\"http://.../SEZ_3_82053_L12.xml\">http://&#8230;/SEZ_3_82053_L12.xml</a> è l&#8217;URL del file XML.</li>\n</ul>\n<p>In output nella shell avrò:</p>\n<div class=\"line\"><span class=\"syntax--text syntax--plain\"><span class=\"syntax--meta syntax--paragraph syntax--text\">1,5,12,1</span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--plain\"><span class=\"syntax--meta syntax--paragraph syntax--text\">2,9,12,1</span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--plain\"><span class=\"syntax--meta syntax--paragraph syntax--text\">3,2,12,1</span></span></div>\n<div class=\"line\"><span class=\"syntax--text syntax--plain\"><span class=\"syntax--meta syntax--paragraph syntax--text\">&#8230;,&#8230;,&#8230;,&#8230;</span></span></div>\n<p>Ovvero</p>\n<table>\n<thead>\n<tr>\n<th>numeroCandidato</th>\n<th>voti</th>\n<th>numeroLista</th>\n<th>sezione</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>5</td>\n<td>12</td>\n<td>1</td>\n</tr>\n<tr>\n<td>2</td>\n<td>9</td>\n<td>12</td>\n<td>1</td>\n</tr>\n<tr>\n<td>3</td>\n<td>2</td>\n<td>12</td>\n<td>1</td>\n</tr>\n<tr>\n<td>&#8230;</td>\n<td>&#8230;</td>\n<td>&#8230;</td>\n<td>&#8230;</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"creare-dei-file-csv-con-i-dati-per-tutte-le-liste\">Creare dei file CSV con i dati per tutte le liste</h1>\n<p>Ho pensato che possa essere molto interessante fare un esempio più ricco e completo e creare uno script <code>bash</code> per:</p>\n<ul>\n<li>scaricare tutti i file <code>XML</code> delle 18 liste;</li>\n<li>estrarre da ognuno l&#8217;anagrafica dei candidati consiglieri;</li>\n<li>estrarre da ognuno il numero di voti, per ogni sezione, di ogni candidato al consiglio;</li>\n<li>fare il <em>join</em> &#8211; unire &#8211; le info sul numero di voti, con l&#8217;anagrafica dei candidati consiglieri, e creare un file <code>CSV</code> per ogni lista;</li>\n<li>unire tutti i file <code>CSV</code> e produrre anche un unico file con il numero di voti di ogni candidato, per ogni lista, per ogni sezione.</li>\n</ul>\n<h2 id=\"requisiti\">Requisiti</h2>\n<p>Il prodotto finale è uno script <code>BASH</code>, quindi bisogna avere a disposizione un sistema compatibile con questo linguaggio (lo sono essenzialmente tutti).</p>\n<p>Richiede tre <em>utility</em>:</p>\n<ul>\n<li>l&#8217;immancabile cURL, per scaricare i file;</li>\n<li><a href=\"http://xmlstar.sourceforge.net/download.php\">XMLStarlet</a> per interrogare i file <code>XML</code> e trasformarli in file <code>CSV</code>;</li>\n<li><a href=\"http://csvkit.readthedocs.io/\">csvkit</a> per fare il <em>join</em> e il <em>merge</em> dei <code>CSV</code> scaricati.</li>\n</ul>\n<p>Richiede una <strong>conoscenza di base</strong> (e/o la volontà/possibità di farserla) su:</p>\n<ul>\n<li><a href=\"https://www.w3schools.com/xml/xpath_intro.asp\">XPATH</a>, per estrarre i dati (per interrogare) i file XML;</li>\n<li><a href=\"https://github.com/jlevy/the-art-of-command-line/blob/master/README-it.md\">la linea di comando</a>, perché è un po&#8217; il campo di gioco di queste modalità di accesso e modifica di file;</li>\n<li><a href=\"http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html#toc\">BASH</a>, che è il linguaggio dello script finale;</li>\n<li>aprire i file XML del comune con un buon editor di testo, guardarli un po’ e comprenderne la struttura.</li>\n</ul>\n<h2 id=\"lo-script\">Lo script</h2>\n<p>Lo script per intero è più in basso. A seguire un esploso delle varie parti che lo compongono.</p>\n<p>La prima cosa che viene eseguita nello script è il download dei file delle liste. Queste sono 18 ed è comodo scaricarle con un ciclo <code>for ... loop</code> che lo fa 18 volte per noi.</p>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\">  <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> curl -s <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--markup syntax--underline syntax--link syntax--http syntax--hyperlink\">http://comunali2017.comune.palermo.it/SEZ_3_82053_L</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span>.xml<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.xml<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<p>&nbsp;</p>\n<p>Poi da ognuno dei 18 file <code>XML</code> vengono estratti i dati anagrafici e i dati per sezione, sempre con un ciclo <code>for</code>.<br />\nA ogni file viene aggiunta anche un&#8217;intestazione di colonne.</p>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> scarico l&#8217;anagrafica di ogni candidato di ogni lista</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> xmlstarlet sel -t -m <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>//C0/C1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@NOME<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../@NOME<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -n <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.xml <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> anagraficaLista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> sed -i <span class=\"syntax--string syntax--quoted syntax--single syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8216;</span>1s/^/numeroCandidato,nomeCandidato,numeroLista,nomeLista\\n/<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8216;</span></span> anagraficaLista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">&amp;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> scarico i voti di ogni candidato di ogni lista per ogni sezione</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> xmlstarlet sel -t -m <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>//SV/V0/V1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@VOTIVALIDI_C1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>  -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -n <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.xml <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> listaSezioni_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> sed  -i <span class=\"syntax--string syntax--quoted syntax--single syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8216;</span>1s/^/numeroCandidato,voti,numeroLista,sezione\\n/<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8216;</span></span> listaSezioni_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">&amp;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<p>&nbsp;</p>\n<p>I file di anagrafica hanno questa struttura:</p>\n<table>\n<thead>\n<tr>\n<th>numeroCandidato</th>\n<th>nomeCandidato</th>\n<th>numeroLista</th>\n<th>nomeLista</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>GELARDA IGOR DETTO GERARDA DETTO GERALDA</td>\n<td>12</td>\n<td>MOVIMENTO 5 STELLE</td>\n</tr>\n<tr>\n<td>2</td>\n<td>ARGIROFFI GIULIA</td>\n<td>12</td>\n<td>MOVIMENTO 5 STELLE</td>\n</tr>\n<tr>\n<td>3</td>\n<td>CAPARROTTA GIANCARLO DETTO CAPAROTTA</td>\n<td>12</td>\n<td>MOVIMENTO 5 STELLE</td>\n</tr>\n</tbody>\n</table>\n<p>Mentre quelli con i dati per sezione:</p>\n<table>\n<thead>\n<tr>\n<th>numeroCandidato</th>\n<th>voti</th>\n<th>numeroLista</th>\n<th>sezione</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>5</td>\n<td>12</td>\n<td>1</td>\n</tr>\n<tr>\n<td>2</td>\n<td>9</td>\n<td>12</td>\n<td>1</td>\n</tr>\n<tr>\n<td>3</td>\n<td>2</td>\n<td>12</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p>Poi viene fatto il <em>join</em> tra anagrafica e dati per sezione:</p>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> csvsql &#8211;query <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>select * from  listaSezioni_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span> LEFT JOIN anagraficaLista_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span> ON listaSezioni_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span>.numeroCandidato=anagraficaLista_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span>.numeroCandidato<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> listaSezioni_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt anagraficaLista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> lista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.csv<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<div></div>\n<p>Per ogni lista viene prodotto un file con nome <code>lista_NumeroLista.csv</code>, con questa struttura (ci sono delle colonne duplicate, che potrei rimuovere in fase di <em>join</em>):</p>\n<table>\n<thead>\n<tr>\n<th>numeroCandidato</th>\n<th>voti</th>\n<th>numeroLista</th>\n<th>sezione</th>\n<th>numeroCandidato</th>\n<th>nomeCandidato</th>\n<th>numeroLista</th>\n<th>nomeLista</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>5</td>\n<td>12</td>\n<td>1</td>\n<td>1</td>\n<td>GELARDA IGOR DETTO GERARDA DETTO GERALDA</td>\n<td>12</td>\n<td>MOVIMENTO 5 STELLE</td>\n</tr>\n<tr>\n<td>2</td>\n<td>9</td>\n<td>12</td>\n<td>1</td>\n<td>2</td>\n<td>ARGIROFFI GIULIA</td>\n<td>12</td>\n<td>MOVIMENTO 5 STELLE</td>\n</tr>\n<tr>\n<td>3</td>\n<td>2</td>\n<td>12</td>\n<td>1</td>\n<td>3</td>\n<td>CAPARROTTA GIANCARLO DETTO CAPAROTTA</td>\n<td>12</td>\n<td>MOVIMENTO 5 STELLE</td>\n</tr>\n</tbody>\n</table>\n<p>E infine viene creato anche un unico file <code>CSV</code> di insieme (scaricabile da <a href=\"https://query.data.world/s/ayn93vioydu7l9heo64wg228w\">qui</a>), con i dati per tutti i consiglieri di tutte le liste, per ogni sezione (senza le colonne duplicate). Sono 638 candidati per 600 sezioni per un totale di 382800 record.</p>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">csvstack <span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\">*</span>.csv <span class=\"syntax--keyword syntax--operator syntax--pipe syntax--shell\">|</span> csvcut -c 1,2,3,4,6,8 <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> liste.csv</span></div>\n<div></div>\n<p>Quindi avrò in output 1 file <code>CSV</code> con i dati per ogni lista e quello soprastante, per totale di 19 file <code>CSV</code> (encoding <code>UTF-8</code> e come separatore la <code>,</code>).</p>\n<p>Lo script di poche righe (al netto dei commenti) è quello di sotto, tutto realizzato con oggetti <em>free </em>e<em> open-source</em>.</p>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shebang syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shebang syntax--shell\">#!</span>/bin/bash</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> Requisiti #</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> &#8211; avere un sistema in cui è possibile eseguire uno script bash;</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> &#8211; l&#8217;utility XMLStarlet <span class=\"syntax--markup syntax--underline syntax--link syntax--http syntax--hyperlink\">http://xmlstar.sourceforge.net/download.php</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> &#8211; l&#8217;utility csvkit <span class=\"syntax--markup syntax--underline syntax--link syntax--http syntax--hyperlink\">http://csvkit.readthedocs.io/</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> attivo la modalità di debug</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--support syntax--function syntax--builtin syntax--shell\">set</span> -x</span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> cancello file csv e xml pre esistenti nella cartella in cui lancio lo script</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">rm -R <span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\">*</span>.csv</span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> scarico tutti i dati delle 18 liste</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> curl -s <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--markup syntax--underline syntax--link syntax--http syntax--hyperlink\">http://comunali2017.comune.palermo.it/SEZ_3_82053_L</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span>.xml<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.xml<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span><span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> scarico l&#8217;anagrafica di ogni candidato di ogni lista</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> xmlstarlet sel -t -m <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>//C0/C1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@NOME<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../@NOME<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -n <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.xml <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> anagraficaLista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> sed -i <span class=\"syntax--string syntax--quoted syntax--single syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8216;</span>1s/^/numeroCandidato,nomeCandidato,numeroLista,nomeLista\\n/<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8216;</span></span> anagraficaLista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">&amp;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> scarico i voti di ogni candidato di ogni lista per ogni sezione</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> xmlstarlet sel -t -m <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>//SV/V0/V1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>@VOTIVALIDI_C1<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>  -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -o <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>,<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -v <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>../../@NUMERO<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> -n <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.xml <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> listaSezioni_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> sed  -i <span class=\"syntax--string syntax--quoted syntax--single syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8216;</span>1s/^/numeroCandidato,voti,numeroLista,sezione\\n/<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8216;</span></span> listaSezioni_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">&amp;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> faccio il join tra i dati per sezione e l&#8217;anagrafica dei candidati</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> l&#8217;output è un file di dettaglio in formato CSV per ogni lista</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--meta syntax--scope syntax--for-in-loop syntax--shell\"><span class=\"syntax--keyword syntax--control syntax--shell\">for</span> <span class=\"syntax--variable syntax--other syntax--loop syntax--shell\">i</span> <span class=\"syntax--keyword syntax--control syntax--shell\">in</span> {1..18}<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">do</span> csvsql &#8211;query <span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span>select * from  listaSezioni_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span> LEFT JOIN anagraficaLista_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span> ON listaSezioni_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span>.numeroCandidato=anagraficaLista_<span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span>.numeroCandidato<span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span> listaSezioni_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt anagraficaLista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.txt <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> lista_<span class=\"syntax--string syntax--quoted syntax--double syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--shell\">&#8220;</span><span class=\"syntax--variable syntax--other syntax--normal syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--variable syntax--shell\">$</span>i</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--shell\">&#8220;</span></span>.csv<span class=\"syntax--keyword syntax--operator syntax--list syntax--shell\">;</span> <span class=\"syntax--keyword syntax--control syntax--shell\">done</span></span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> faccio il merge di tutti i CSV e produco un unico file</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> con tutti i voti per candidato per sezione di ogni lista</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">csvstack <span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\">*</span>.csv <span class=\"syntax--keyword syntax--operator syntax--pipe syntax--shell\">|</span> csvcut -c 1,2,3,4,6,8 <span class=\"syntax--keyword syntax--operator syntax--redirect syntax--shell\">&gt;</span> liste.csv</span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"> </span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\"><span class=\"syntax--comment syntax--line syntax--number-sign syntax--shell\"><span class=\"syntax--punctuation syntax--definition syntax--comment syntax--shell\">#</span> cancello file che non mi sono più utili</span></span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">rm -R <span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\">*</span>.txt</span></div>\n<div class=\"line\"><span class=\"syntax--source syntax--shell\">rm -R <span class=\"syntax--keyword syntax--operator syntax--glob syntax--shell\">*</span>.xml</span></div>\n<h2>Libro consigliato</h2>\n<p>Per entrare nel mondo divertentissimo ed efficiente della “riga di comando” mi sento di consigliare il bel “<a href=\"http://shop.oreilly.com/product/0636920032823.do?cmp=af-strata-books-videos-product_cj_9781491947852_%25zp\">Data Science at the Command Line</a>” . È un libro per tutti, di facile lettura e pieno di esempi utili.</p>\n<div class=\"sharedaddy sd-sharing-enabled\"><div class=\"robots-nocontent sd-block sd-social sd-social-icon sd-sharing\"><h3 class=\"sd-title\">Condividi:</h3><div class=\"sd-content\"><ul><li class=\"share-twitter\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-twitter-1686\" class=\"share-twitter sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=twitter\" target=\"_blank\" title=\"Fai clic qui per condividere su Twitter\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su Twitter (Si apre in una nuova finestra)</span></a></li><li class=\"share-facebook\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-facebook-1686\" class=\"share-facebook sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=facebook\" target=\"_blank\" title=\"Fai clic per condividere su Facebook\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Facebook (Si apre in una nuova finestra)</span></a></li><li><a href=\"#\" class=\"sharing-anchor sd-button share-more\"><span>Altro</span></a></li><li class=\"share-end\"></li></ul><div class=\"sharing-hidden\"><div class=\"inner\" style=\"display: none;\"><ul><li class=\"share-linkedin\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"sharing-linkedin-1686\" class=\"share-linkedin sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=linkedin\" target=\"_blank\" title=\"Fai clic qui per condividere su LinkedIn\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic qui per condividere su LinkedIn (Si apre in una nuova finestra)</span></a></li><li class=\"share-telegram\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-telegram sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=telegram\" target=\"_blank\" title=\"Fai clic per condividere su Telegram\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su Telegram (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li><li class=\"share-jetpack-whatsapp\"><a rel=\"nofollow noopener noreferrer\" data-shared=\"\" class=\"share-jetpack-whatsapp sd-button share-icon no-text\" href=\"/2017/06/16/leggere-interrogare-e-trasformare-file-xml-da-riga-di-comando/?share=jetpack-whatsapp\" target=\"_blank\" title=\"Fai clic per condividere su WhatsApp\"><span></span><span class=\"sharing-screen-reader-text\">Fai clic per condividere su WhatsApp (Si apre in una nuova finestra)</span></a></li><li class=\"share-end\"></li></ul></div></div></div></div></div>","date":"2017-06-16T12:27:28","author":{"node":{"name":"Andrea Borruso","slug":"andreaborruso"}},"comments":{"nodes":[{"content":"<p>Sinceramente utilizzo molto di più csvkit, per me è stato molto importante venirne a conoscenza. Molto.<br />\nXMLStarlet non ho avuto modo di testarlo nel mondo reale, purtroppo il mio background/skillset non mi permette approcciare in maniera immediata l&#8217;analisi dei dati o lo &#8220;scraping&#8221; (che é veramente dove voglio arrivare) e vado a passo lento ma costante. Una della mie principali mancanze è la impossibilità di raggionare con le regex e sapere pensare in XPATH, che anche se è certamente una cavolata (sopratutto XPATH) e bisognerebbe solo dedicarli un pochitino di tempo, quest&#8217;ultimo non so da dove tirarlo fuori. Senza grep/xpath non so dove mettere le mani.<br />\nPer adesso leggo e seguo con molto interese tutto quello che pubblicate e mi sto facendo il primer sulla command line su coursera. Se ci riesco mi ci metto serio con il libro &#8220;Data Science at The command line&#8221; questa estate, e forse a settembre ti racconterò una storia diversa.<br />\nUn bel po di roba da digerire per un Visual Designer wannabe. 😉</p>\n"},{"content":"<p>Roberto hai usato XMLstarlet? Che te ne pare?</p>\n"},{"content":"<p>Muchas Gracias 🙂</p>\n"}]},"categories":{"nodes":[{"name":"tutorial","slug":"tutorial"}]},"tags":{"nodes":[{"name":"bash","slug":"bash"},{"name":"elezioni","slug":"elezioni"},{"name":"palermo","slug":"palermo"},{"name":"xml","slug":"xml"}]},"featuredImage":null}]}},"pageContext":{"name":"tutorial","slug":"tutorial"}},
    "staticQueryHashes": ["67603594"]}